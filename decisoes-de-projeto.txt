Seu nome: Osvaldo da Silva Neto
Estudante Engenharia de Telecomunicações
IFSC - Campus São José
7 Fase


    Procedimento na execução do Teste Java com Banco de Dados


    Inicialmente tomei um tempo analisando os pré requisitos e os recursos que o projeto me oferecia, para então poder tomar as decisões necessárias nas próximas etapas. Neste momento percebi que ja existia a classe "ClienteDTOImpl", foi a partir desta que iniciei a execução do projeto.
    Nesta próxima etapa dei inicio a construção das outras implementações, começando pela "FilmeDTOImpl" da qual já existia uma interface para sobrescrever os métodos necessários e me parecia a mais simples para implementar no momento. Iniciando pelo método "find", do qual recebe uma Conexão e um Integer para então efetuar uma pesquisa no banco de dados através da biblioteca "PreparedStatement", capturamos o objeto filme compatível com a pesquisa e o retornei a função main, posso adiantar que no método findAll também utilizei a mesma metodologia porém neste método retornei uma lista de objetos filme. Para implementar o método delete utilizei a biblioteca "PreparedStatement" para apagar tanto o filme quanto seu relacionamento com o domínio "Aluguel, para os métodos edit e insert apenas utilizei a mesma biblioteca para inserir e editar o filme, a única diferença é que na edição não é necessário inserir um novo id.
    Na implementação da classe "AluguelDTOImpl" foi iniciada sua confecção a partir do método find, do qual ele recebe uma conexão e um id para então efetuar a pesquisa no banco de dados, pelo motivo de termos um armazenamento de banco de dados relacional e unidirecional foi necessário uma segunda pesquisa na tabela de relacionamento da qual ela armazena as FK com as ids tanto do aluguel quanto do filme, vale ressaltar que neste momento ao deletar o filme o aluguel e seus respectivos dados se mantém, porém o filme vai constar inexistente, para implementar o método "findAll" utilizamos a mesma metodologia porém retornamos uma lista de alugueis. Nos métodos "delete" através da biblioteca citada anteriormente deletamos o objeto aluguel da tabela de relacionamento e da tabela de alugueis. Para edição do objeto aluguel foi seguido as dicas dadas no projeto, primeiramente deletamos todas suas relações para então inserir novamente os filmes relacionados ao aluguel na tabela de relacionamento, para finalizar a inserção do objeto aluguel é muito parecida com o método de edição porém da mesma maneira que anteriormente, neste método inserimos a id fornecida pelo banco de dados.
    Na classe Main podemos ver todos os métodos sendo testados, neste momento me deparei com um problema que já era esperado, ao deletar um cliente existe uma FK que a vincula a outro banco de dados, sendo assim optei por deixar esta parte desta forma pois esta classe ja estava implementada e se deletarmos o cliente ficaremos sem o registro do aluguel devido a sua FK for impossível cadastrar como nula, vale lembrar que o maior dificuldade que tive neste projeto foi manter a relação entre Aluguel e Filme sempre atualizada, devido a se tratar de um banco relacional existe um elo que liga ambas as tabelas.